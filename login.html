<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login — Daily Fruit Co.</title>

  <!-- TAILWIND -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- FONTAWESOME -->
  <script src="https://kit.fontawesome.com/0c9b1f3f2d.js" crossorigin="anonymous"></script>

  <style>
    body{
      font-family:'Inter',sans-serif;
      background:linear-gradient(180deg,#f8fafc,#eef7ff);
    }

    .glass{
      background:rgba(255,255,255,0.9);
      backdrop-filter:blur(12px);
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.4);
      box-shadow:0 10px 30px rgba(15,23,42,0.12);
    }

    .section-title{
      background:linear-gradient(90deg,#06b6d4,#7c3aed);
      -webkit-background-clip:text;
      color:transparent;
      font-weight:800;
    }

    /* GLASS ICON STYLE */
    .glass-icon {
      width: 45px;
      height: 45px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      font-size: 1.2rem;
      color: #1e293b;
      transition: 0.25s ease;
    }
    .glass-icon:hover {
      transform: scale(1.12);
      background: linear-gradient(90deg,#06b6d4,#7c3aed);
      color: white;
    }

    .footer-social{
      display:flex;
      flex-direction:row;
      gap:14px;
      align-items:center;
    }

    .active-tab{
      background:linear-gradient(90deg,#06b6d4,#7c3aed);
      color:white !important;
      font-weight:700;
    }

    @media(max-width:768px){
      .desktop-only{display:none;}
    }
  </style>
</head>
<body>

<!-- HEADER -->
<header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b">
  <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
    <a href="index.html" class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-400 to-teal-400 text-white flex items-center justify-center font-bold shadow">
        DF
      </div>
      <div>
        <h1 class="text-lg font-semibold">Daily Fruit Co.</h1>
        <p class="text-xs text-gray-500">Freshness Delivered Daily</p>
      </div>
    </a>

    <nav class="hidden md:flex gap-4 text-sm">
      <a href="index.html" class="hover:text-green-600">Home</a>
      <a href="plans.html" class="hover:text-emerald-600">Plans</a>
      <a href="login.html" class="hover:text-indigo-600 font-bold">Login</a>
      <a href="signup.html" class="hover:text-indigo-600">Signup</a>
      <a href="dashboard.html" class="hover:text-emerald-600">Dashboard</a>
    </nav>
  </div>
</header>

<!-- PAGE HEADING -->
<section class="max-w-6xl mx-auto px-4 py-8">
  <h2 class="text-3xl md:text-4xl font-extrabold section-title">Login to Your Account</h2>
  <p class="text-gray-600 text-sm md:text-base mt-1">
    Access your fruit plans, profile, and checkout.
  </p>
</section>

<!-- LOGIN BOX -->
<section class="max-w-3xl mx-auto px-4 pb-10">
  <div class="glass p-6 md:p-8">

    <!-- TABS -->
    <div class="flex border-b mb-6">
      <button id="tabPassword"
              class="flex-1 text-center py-2 text-sm font-medium hover:bg-gray-100">
        Login with Password
      </button>
      <button id="tabOtp"
              class="flex-1 text-center py-2 text-sm font-medium hover:bg-gray-100">
        Login with OTP
      </button>
    </div>

    <!-- TAB CONTENT WRAPPER -->
    <div id="loginContent"></div>
<script>
  const API_BASE = "https://dailyfruit-backend.onrender.com";

  const loginContent = document.getElementById("loginContent");
  const tabPassword = document.getElementById("tabPassword");
  const tabOtp = document.getElementById("tabOtp");

  // DEFAULT TAB = PASSWORD LOGIN
  showPasswordLogin();
  tabPassword.classList.add("active-tab");

  tabPassword.onclick = () => {
    tabPassword.classList.add("active-tab");
    tabOtp.classList.remove("active-tab");
    showPasswordLogin();
  };

  tabOtp.onclick = () => {
    tabOtp.classList.add("active-tab");
    tabPassword.classList.remove("active-tab");
    showOtpLogin();
  };

  /* ---------------------- PASSWORD LOGIN UI ---------------------- */
  function showPasswordLogin(){
    loginContent.innerHTML = `
      <form id="passwordLoginForm" class="space-y-4">

        <div>
          <label class="text-sm font-medium">Email or Phone *</label>
          <input type="text" id="loginId" required
                 class="w-full border rounded-md px-3 py-2 bg-white/80">
        </div>

        <div>
          <label class="text-sm font-medium">Password *</label>
          <input type="password" id="loginPassword" required
                 class="w-full border rounded-md px-3 py-2 bg-white/80">
        </div>

        <button class="w-full mt-3 px-4 py-2 rounded-full text-white"
                style="background:linear-gradient(90deg,#06b6d4,#7c3aed);">
          Login
        </button>

        <p class="text-xs text-gray-500 text-center mt-3">
          Don't have an account?
          <a href="signup.html" class="text-indigo-600 underline">Create one</a>
        </p>

      </form>
    `;

    document.getElementById("passwordLoginForm").onsubmit = passwordLogin;
  }

  /* PASSWORD LOGIN FUNCTION */
  async function passwordLogin(e){
    e.preventDefault();

    const loginId = document.getElementById("loginId").value.trim();
    const password = document.getElementById("loginPassword").value;

    let profile = JSON.parse(localStorage.getItem("df_user_profile") || "{}");

    if(!profile.email){
      alert("Account not found. Please create an account first.");
      return;
    }

    if(loginId !== profile.email && loginId !== profile.phone){
      alert("Details not matching our records.");
      return;
    }

    if(password !== profile.password){
      alert("Incorrect password.");
      return;
    }

    alert("Login Successful!");
    window.location.href = "dashboard.html";
  }

  /* ---------------------- OTP LOGIN UI ---------------------- */
  function showOtpLogin(){
    loginContent.innerHTML = `
      <form id="otpLoginForm" class="space-y-4">

        <div>
          <label class="text-sm font-medium">Email or Phone *</label>
          <input type="text" id="otpLoginId" required
                 class="w-full border rounded-md px-3 py-2 bg-white/80">
        </div>

        <button type="button" id="sendOtpBtn"
                class="w-full px-4 py-2 rounded-full text-white"
                style="background:linear-gradient(90deg,#06b6d4,#7c3aed);">
          Send OTP to Email
        </button>

        <p id="otpStatus" class="text-xs text-gray-600"></p>

        <div id="otpBox" class="hidden">
          <label class="text-sm font-medium">Enter OTP</label>
          <input type="text" id="otpInput"
                 class="w-full border rounded-md px-3 py-2 bg-white/80">
          
          <button class="w-full mt-3 px-4 py-2 rounded-full text-white"
                  style="background:linear-gradient(90deg,#06b6d4,#7c3aed);">
            Verify OTP & Login
          </button>
        </div>

      </form>
    `;

    document.getElementById("sendOtpBtn").onclick = sendOtp;
    document.getElementById("otpLoginForm").onsubmit = verifyOtp;
  }

  let generatedOTP = "";

  /* SEND OTP */
  async function sendOtp(){
    const id = document.getElementById("otpLoginId").value.trim();
    const status = document.getElementById("otpStatus");

    let profile = JSON.parse(localStorage.getItem("df_user_profile") || "{}");

    if(id !== profile.email && id !== profile.phone){
      status.textContent = "Account not found. Please create an account first.";
      status.className = "text-xs text-red-600";
      return;
    }

    // Generate simple OTP
    generatedOTP = String(Math.floor(100000 + Math.random()*900000));

    status.textContent =
      "OTP sent to your email. Check inbox/spam.";
    status.className = "text-xs text-emerald-600";

    document.getElementById("otpBox").classList.remove("hidden");
  }

  /* VERIFY OTP */
  function verifyOtp(e){
    e.preventDefault();

    const input = document.getElementById("otpInput").value.trim();

    if(input !== generatedOTP){
      alert("Incorrect OTP");
      return;
    }

    alert("OTP Verified! Login Successful.");
    window.location.href = "dashboard.html";
  }
</script>
<!-- FOOTER -->
<footer class="mt-10 bg-[#020617] text-white">
  <div class="max-w-6xl mx-auto px-4 py-10 grid md:grid-cols-3 gap-10 text-sm">

    <!-- COLUMN 1 -->
    <div>
      <h3 class="text-xl font-bold section-title mb-4">Get in Touch</h3>
      <p class="text-gray-300">Call / WhatsApp</p>
      <p class="text-gray-400">+91-9226157351</p>
      <p class="mt-4 text-gray-300">Email</p>
      <p class="text-gray-400">dailyfruitco@gmail.com</p>
    </div>

    <!-- COLUMN 2 -->
    <div>
      <h3 class="text-xl font-bold section-title mb-4">Company</h3>
      <a href="#" class="block text-gray-300 hover:text-white">Contact Us</a>
      <a href="#" class="block text-gray-300 hover:text-white">FAQs</a>
      <a href="#" class="block text-gray-300 hover:text-white">Blogs</a>
      <a href="#" class="block text-gray-300 hover:text-white">Policy</a>
    </div>

    <!-- COLUMN 3 -->
    <div>
      <h3 class="text-xl font-bold section-title mb-4">Follow Us</h3>

      <div class="footer-social">
        <a class="glass-icon" target="_blank"><i class="fab fa-instagram"></i></a>
        <a class="glass-icon" target="_blank"><i class="fab fa-facebook-f"></i></a>
        <a class="glass-icon" target="_blank"><i class="fab fa-linkedin-in"></i></a>
        <a class="glass-icon" target="_blank"><i class="fab fa-twitter"></i></a>
        <a class="glass-icon" target="_blank"><i class="fab fa-whatsapp"></i></a>
      </div>

      <p class="mt-6 text-gray-500 text-xs">© 2025 Daily Fruit Co.</p>
    </div>

  </div>
</footer>

<!-- FLOATING SOCIAL STRIP -->
<div class="fixed right-4 top-1/3 z-40 flex flex-col gap-4 desktop-only">
  <a class="glass-icon"><i class="fab fa-instagram"></i></a>
  <a class="glass-icon"><i class="fab fa-facebook-f"></i></a>
  <a class="glass-icon"><i class="fab fa-linkedin-in"></i></a>
  <a class="glass-icon"><i class="fab fa-twitter"></i></a>
  <a class="glass-icon"><i class="fab fa-whatsapp"></i></a>
</div>

</body>
</html>
